name: Deploy Material for MkDocs site to GitHub Pages
run-name: Build and push Docker image to GitHub

on:
  pull_request:

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout 🛎️
        uses: actions/checkout@v2.3.1
        with:
          submodules: recursive

      - name: Install and Build 🔧
        run: |
          pip install mkdocs mkdocs-material
          sudo apt install --yes \
            libcairo2-dev \
            libfreetype6-dev \
            libffi-dev \
            libjpeg-dev \
            libpng-dev \
            libz-dev
          pip install \
            cairosvg \
            mkdocs-material \
            mkdocs-minify-plugin \
            mkdocs-git-revision-date-localized-plugin \
            mkdocs-glightbox \
            pillow
          mkdocs build

      - name: Deploy 🚀
        uses: JamesIves/github-pages-deploy-action@4.1.4
        with:
          branch: 1-set-material-for-mkdocs-and-github-pages-up
          folder: public
